(this["webpackJsonpp2p-share"]=this["webpackJsonpp2p-share"]||[]).push([[0],[,,,,,function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(4),l=n.n(i),c=(n(10),n(1)),o=n.n(c),s=n(2);n(12);function u(){return d.apply(this,arguments)}function d(){return(d=Object(s.a)(o.a.mark((function e(){var t,n,a,r,i,l,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.datSdk,n=t.DatArchive,e.next=4,n.create({title:"magic-dat"});case 4:return a=e.sent,r=document.getElementById("file-upload").files[0],e.prev=6,i=r.name,e.next=10,f(r);case 10:return l=e.sent,c=l.split(","),e.next=14,a.writeFile("/metadata",c[0],{encoding:"utf-8"});case 14:return e.next=16,a.writeFile("/name",i,{encoding:"utf-8"});case 16:return e.next=18,a.writeFile("/file",c[1],{encoding:"base64"});case 18:console.log(l),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(6),console.error("error in encoding: "+e.t0);case 24:return e.prev=24,console.log("LAST"),e.finish(24);case 27:document.getElementById("share-link").innerHTML=a.url,console.log(a.url);case 29:case"end":return e.stop()}}),e,null,[[6,21,24,27]])})))).apply(this,arguments)}function m(){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(o.a.mark((function e(){var t,n,a,r,i,l,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.datSdk.DatArchive,n=document.getElementById("receive-text").value,console.log("reading: "+n),e.next=5,t.load(n);case 5:return a=e.sent,e.next=8,a.readdir("/");case 8:return r=e.sent,console.log("filenames: "+r),e.next=12,a.readFile("/metadata","utf-8");case 12:return i=e.sent,e.next=15,a.readFile("/name","utf-8");case 15:return l=e.sent,e.next=18,a.readFile("/file","base64");case 18:c=e.sent,alert("receive complete"),window.receivedFilename=l,document.querySelector("a").href=i+","+c,console.log("received image: "+c),console.log("metadata: "+i);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var v=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h2",null," P2P file share "),r.a.createElement("div",null,"Select file to share: "),r.a.createElement("input",{type:"file",name:"file-upload",id:"file-upload"}),r.a.createElement("br",null),r.a.createElement("button",{onClick:u,style:{margin:"5px"}}," Start Sharing "),r.a.createElement("div",null," sharing link: ",r.a.createElement("div",{id:"share-link"})," "),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"receive-link",id:"receive-text"}),r.a.createElement("button",{onClick:m,style:{margin:"5px"}}," Receive files "),r.a.createElement("div",null," received value: ",r.a.createElement("div",{id:"received-val"})," "),r.a.createElement("div",null," received image: ",r.a.createElement("img",{alt:"received-img"})," "),r.a.createElement("p",null,"File receievd: ",window.receivedFilename),r.a.createElement("a",{href:"data...",target:"_blank"},r.a.createElement("button",null," Download ")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[5,1,2]]]);
//# sourceMappingURL=main.e75a5294.chunk.js.map